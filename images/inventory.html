<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Inventory | BloodDonor</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/inventory.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- Header content from previous example -->
    <header>
        <!-- ... -->
    </header>

    <section class="inventory-section">
        <div class="container">
            <h2>Blood Inventory Status</h2>
            <p>Current availability of blood units in our bank. Updated in real-time.</p>
            
            <div class="inventory-filters">
                <div class="search-box">
                    <input type="text" id="searchInventory" placeholder="Search blood type...">
                    <button><i class="fas fa-search"></i></button>
                </div>
                <div class="sort-options">
                    <label for="sortBy">Sort by:</label>
                    <select id="sortBy">
                        <option value="blood_group">Blood Type</option>
                        <option value="units_available">Units Available</option>
                    </select>
                </div>
            </div>
            
            <div class="inventory-grid" id="inventoryGrid">
                <!-- Inventory items will be loaded via AJAX -->
                <div class="loading">Loading inventory data...</div>
            </div>
            
            <div class="inventory-stats">
                <div class="stat-card total">
                    <h3>Total Units Available</h3>
                    <p id="totalUnits">0</p>
                </div>
                <div class="stat-card critical">
                    <h3>Critical Levels</h3>
                    <p id="criticalTypes">0</p>
                </div>
                <div class="stat-card updated">
                    <h3>Last Updated</h3>
                    <p id="lastUpdated">Just now</p>
                </div>
            </div>
        </div>
    </section>

    <section class="donation-callout">
        <div class="container">
            <div class="callout-content">
                <h2>Low Inventory Alert</h2>
                <p>Our blood bank is currently running low on several blood types. Your donation can help save lives today.</p>
                <a href="donate.html" class="btn-primary">Donate Now</a>
            </div>
        </div>
    </section>

    <footer>
        <!-- ... -->
    </footer>

    <script src="js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Load inventory data via AJAX
            fetch('php/get_inventory.php')
                .then(response => response.json())
                .then(data => {
                    const inventoryGrid = document.getElementById('inventoryGrid');
                    inventoryGrid.innerHTML = '';
                    
                    let totalUnits = 0;
                    let criticalCount = 0;
                    
                    data.forEach(item => {
                        totalUnits += parseInt(item.units_available);
                        if (item.units_available < 3) criticalCount++;
                        
                        const status = item.units_available < 3 ? 'critical' : 
                                       item.units_available < 5 ? 'low' : 'adequate';
                        
                        const inventoryItem = document.createElement('div');
                        inventoryItem.className = `inventory-item ${status}`;
                        inventoryItem.innerHTML = `
                            <h3>${item.blood_group}</h3>
                            <div class="units">${item.units_available} Units</div>
                            <div class="status">Status: <span>${status.charAt(0).toUpperCase() + status.slice(1)}</span></div>
                            <div class="updated">Updated: ${formatDate(item.last_updated)}</div>
                        `;
                        inventoryGrid.appendChild(inventoryItem);
                    });
                    
                    // Update stats
                    document.getElementById('totalUnits').textContent = totalUnits;
                    document.getElementById('criticalTypes').textContent = criticalCount;
                    document.getElementById('lastUpdated').textContent = formatDate(new Date());
                })
                .catch(error => {
                    console.error('Error loading inventory:', error);
                    document.getElementById('inventoryGrid').innerHTML = 
                        '<div class="no-results">Error loading inventory data. Please try again later.</div>';
                });
        });
    </script>
</body>
</html>